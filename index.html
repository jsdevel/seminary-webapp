<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Seminary Dashboard</title>

<!-- PWA -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#0b1020">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Seminary">

<link rel="apple-touch-icon" href="icon-192.png">
<link rel="stylesheet" href="app.css">
</head>

<body>
<div class="wrap">

  <!-- ========= SESSIONS ========= -->
  <div id="viewSessions">
    <div class="gridSessions">
      <div class="leftPane">
        <div class="card">
          <div style="font-size:16px;margin-bottom:8px;font-weight:950;">New Session</div>
          <input id="sessionDate" type="date"/>
          <input id="sessionTitle" placeholder="Optional title" style="margin-top:8px"/>
          <div class="row" style="margin-top:10px">
            <button id="btnCreate">Create</button>
            <button id="btnReset" class="ghost">Reset</button>
          </div>
          <div class="status">Creates a new session and copies teams/members from the most recent session (if any).</div>
        </div>
      </div>

      <div class="rightPane">
        <div class="card">
          <div style="font-size:16px;margin-bottom:0;font-weight:950;">Sessions</div>
          <div class="meta">Newest at top • List scrolls here (page never scrolls)</div>
        </div>
        <div class="sessionsBox">
          <ul id="sessionList"></ul>
        </div>
      </div>
    </div>
  </div>

  <!-- ========= GAME ========= -->
  <div id="viewGame" class="hidden">

    <div class="topbar">
      <div class="topbarLeft">
        <div class="title" id="gameSessionTitle"></div>
        <div class="meta" id="gameSessionMeta"></div>
      </div>

      <div class="topbarMid">
        <div class="pointsBar" id="pointsBar"></div>
      </div>

      <div class="topbarRight">
        <button id="btnOpenDisplay" class="ghost">Open Display View</button>
        <button id="btnBack" class="ghost">← Back</button>
      </div>
    </div>

    <div class="gameGrid">

      <!-- LEFT: teams (scroll only list) -->
      <div class="card colLeft">
        <div class="colLeftInner">
          <div class="leftTop">
            <div class="row">
              <input id="newTeamName" placeholder="Team name"/>
              <button id="btnAddTeam">Add</button>
            </div>
          </div>

          <div id="teamsWrap" class="teamsScroll" style="margin-top:10px"></div>
        </div>
      </div>

      <!-- CENTER: current category fixed + table scroll -->
      <div class="colCenter">
        <div class="centerHeading">
          <div class="kicker">Current category</div>
          <div class="cat" id="currentCategoryHeading">—</div>
        </div>

        <div class="tableWrap">
          <div class="tableHead">
            <div class="left">
              <div class="title">Responses (selected category)</div>
              <div class="sub" id="respSummary">0 total</div>
            </div>
            <div class="actions">
              <button id="btnClearResponses" class="danger smallBtn" title="Delete all responses">Clear</button>
            </div>
          </div>

          <div class="tableBody">
            <table>
              <thead>
                <tr>
                  <th style="width:16%;">Team</th>
                  <th style="width:18%;">Member</th>
                  <th style="width:10%;">Ref</th>
                  <th style="width:56%;">Response</th>
                </tr>
              </thead>
              <tbody id="respTbody"></tbody>
            </table>
          </div>
        </div>
      </div>

      <!-- RIGHT: timer + add category + response fixed; categories scroll in middle -->
      <div class="card colRight">
        <div class="colRightInner">

          <div class="rightFixed">
            <div id="timerBox" class="timerBox hidden">
              <div style="display:flex; justify-content:space-between; align-items:center;">
                <div></div>
                <button id="btnToggleTimerCfg" class="btnToggleTimerCfg smallBtn ghost" title="Timer settings">⚙</button>
              </div>

              <div id="timerBig" class="timerBig">00:30</div>

              <!-- collapsible config -->
              <div id="timerConfig" class="timerSub hidden">
                <div class="timerRow">
                  <div class="label">Turn seconds</div>
                  <input id="turnSeconds" type="number" min="5" step="5" value="30" style="width:110px"/>
                </div>

                <div class="timerRow">
                  <div class="label" id="refLabelText">Verse</div>
                  <input id="refLabel" type="text" value="Verse" style="width:200px"/>
                </div>

                <div class="timerRow">
                  <div class="label">Turns per category</div>
                  <input id="turnsPerCategory" type="number" min="0" step="1" value="0" style="width:110px"/>
                </div>

                <div class="timerRow">
                  <div class="label">Progress</div>
                  <div class="mono" id="catProgress" style="text-align:right; min-width:140px;">—</div>
                </div>
              </div>
            </div>

            <div>
              <div class="sectionTitle">
                <span>Categories</span>
                <span id="catCount" class="meta"></span>
              </div>

              <div class="row" style="margin-top:6px;">
                <input id="newCategoryName" placeholder="Add category"/>
                <button id="btnAddCategory">Add</button>
              </div>
            </div>
          </div>

          <div id="catsScroll" class="catsScroll">
            <div id="catsWrap" class="catList"></div>
          </div>

          <div id="responseBox" class="responseBox hidden">
            <div class="hdr">
              <div class="who" id="responseWho"><span>Waiting…</span></div>
              <div class="meta" id="responseCategory"></div>
            </div>

            <div class="row" style="margin-bottom:10px;">
              <input id="refNumber" placeholder="Reference e.g., 13" />
            </div>

            <textarea id="responseText" placeholder="Enter their response…"></textarea>

            <div class="row" style="margin-top:10px;">
              <button id="btnSubmitResponse">Submit (+1)</button>
              <button id="btnSkipNoPoint" class="ghost" title="Advance without recording. No points.">Skip</button>
            </div>

            <div class="row" style="margin-top:10px;">
              <button id="btnStopChallenge" class="ghost" title="Award 5 points to current team, disable this category, and rotate.">Stop (+5)</button>
              <button id="btnPauseResume" class="ghost">Pause</button>
            </div>
          </div>

          <div class="status" id="rightHint">
            Click a category to start. Timer + highlighting will appear.
          </div>

        </div>
      </div>

    </div>
  </div>

  <!-- ========= DISPLAY (2nd screen / TV) ========= -->
  <div id="viewDisplay" class="hidden">
    <div class="dispWrap">
      <div class="dispTop">
        <div class="dispCategory">
          <div class="dispLabel">Current Category</div>
          <div class="dispCategoryName" id="dispCategory">—</div>
          <div class="dispCurrentUp" id="dispCurrentUp">—</div>
          <div class="dispTurnsLeft" id="dispTurnsLeft">Turns left: —</div>
        </div>

        <div class="dispTimerBox" id="dispTimerBox">
          <div class="dispLabel" id="dispTimerState">TIMER</div>
          <div class="dispTimer" id="dispTimer">00:30</div>
        </div>
      </div>

      <div class="dispMid">
        <div class="dispScores">
          <div class="dispSectionTitle">Team Scores</div>
          <div id="dispScoresGrid" class="dispScoresGrid"></div>
        </div>

        <div class="dispNext">
          <div class="dispSectionTitle">Who’s Up Next</div>
          <div id="dispNextGrid" class="dispNextGrid"></div>
        </div>
      </div>

      <div class="dispBottom">
        <div class="dispBottomHead">
          <div class="dispSectionTitle">Responses (selected category)</div>
          <div class="dispRespPageInfo" id="dispRespPageInfo">Page — / —</div>
        </div>

        <div class="dispRespHeader">
          <div>Team</div>
          <div>Member</div>
          <div>Ref</div>
          <div>Response</div>
        </div>

        <div class="dispResponses" id="dispResponses"></div>
      </div>
    </div>
  </div>
</div>

<script src="app.js"></script>
</body>
</html>
